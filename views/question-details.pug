extends layout.pug

include utils.pug

block content
  div.content-body
    .body-sidebar-left
    .content-center
      div(class=`question-container` id=`question-container-${question.id}`)
        .main-container
          .sidebar-container
            div(class=`vote-button upvote-button question-upvote-button` id=`upvote-question-${question.id}`)
            span.vote-count-span.vote-span.question-votes #{votes}
            a(href="#"): div(class=`vote-button downvote-button question-downvote-button` id=`downvote-question-${question.id}`)
          .content-container
            p#content-text #{question.content}
        .button-container
          if loggedInUser === question.userId
            a(href=`/questions/${question.id}/edit`): button.edit-button Edit
            a(href=`/questions/${question.id}/delete`): button.delete-button Delete
      .answer-container
        div.answer-header
          span.num-answers #{answers.length} Answers
        div.answer-list-container
          each answer in answers
            div(id= `answer-${answer.id}` class="answer-container")
              .main-container
                .sidebar-container
                  a(href="#"): div(class=`vote-button upvote-button` id=`upvote-answer-${answer.id}`)
                  span(class=`vote-span answer-vote-span answer-${answerId}-vote-span`)= `${answerVotesCollection[`${answer.id}vote`]}`
                  a(href="#"): div(class=`vote-button downvote-button` id=`downvote-answer-${answer.id}`)
                .content-container
                  p(id=`${answer.id}-answer-text`) #{answer.content}
              .button-container
                if loggedInUser === answer.userId
                  button(class="edit-answer-btn" id=`edit-answer-btn-${answer.id}`) Edit
                  button(class="delete-answer-btn" id=`delete-answer-btn-${answer.id}`) Delete
                  form(class='hidden' id=`edit-answer-form-${answer.id}`)
                    label Content:
                    textarea(type="text" name="content" id=`${answer.id}-edit-answer`) #{answer.content}
                    button(class="edit-answer-submit" id=`edit-answer-submit-${answer.id}`) Submit Edit
      .answer-form-container
        .btn-container#post-answer-btn
          a(href=`/questions/${question.id}/answer/add` method='GET'): button.post-answer-button Post Your Answer
    .body-sidebar-right
    script(src="/javascripts/votes.js")
    script(src="/javascripts/answerEdit.js")
    script(src="/javascripts/answerDelete.js")
